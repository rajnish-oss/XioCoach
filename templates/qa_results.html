<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA Results</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/framer-motion@10.12.16/dist/framer-motion.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* Markdown Styling */
        .markdown-content h1 { font-size: 1.8rem; font-weight: 700; color: #1e3a8a; margin-bottom: 0.5rem; }
        .markdown-content h2 { font-size: 1.5rem; font-weight: 600; color: #1e40af; margin-top: 1rem; }
        .markdown-content p { line-height: 1.6; color: #374151; margin-bottom: 0.75rem; }
        .markdown-content ul { list-style-type: disc; margin-left: 1.5rem; margin-bottom: 1rem; }
        .markdown-content code { background: #f1f5f9; padding: 0.2rem 0.4rem; border-radius: 4px; font-family: monospace; color: #2563eb; }
        .markdown-content pre { background: #1e293b; color: #f8fafc; padding: 1rem; border-radius: 8px; overflow-x: auto; margin-bottom: 1rem; }
        .markdown-content strong { color: #111827; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-400 via-blue-500 to-blue-600 min-h-screen flex items-center justify-center p-4">
    <div id="container" class="bg-white rounded-xl shadow-2xl p-8 max-w-3xl w-full">
        <h1 class="text-4xl font-bold mb-6 text-center text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-blue-400">Question Answering Results</h1>
        
        <div class="space-y-6">
            <div id="query-box" class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                <h2 class="text-sm uppercase tracking-wider font-bold text-blue-600 mb-1">Query:</h2>
                <p class="text-blue-900 font-medium">{{ query }}</p>
            </div>

            <div id="result-box" class="bg-white rounded-lg p-6 border border-gray-200 relative group">
                <h2 class="text-sm uppercase tracking-wider font-bold text-gray-400 mb-4">Result:</h2>
                
                <button onclick="copyToClipboard()" class="absolute top-4 right-4 text-xs bg-gray-100 hover:bg-blue-100 text-gray-600 px-2 py-1 rounded transition">
                    Copy
                </button>

                <div id="markdown-container" class="markdown-content">
                    </div>
            </div>
        </div>

        <div id="raw-result" style="display: none;">{{ result }}</div>

        <div class="mt-8 flex justify-center space-x-4">
            <a href="/ask" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition shadow-md">
                Ask another question
            </a>
            <a href="/" class="bg-gray-100 text-gray-600 font-bold py-2 px-6 rounded-lg hover:bg-gray-200 transition">
                Home
            </a>
        </div>
    </div>

    <script>
        // 1. Render Markdown
        const rawResult = document.getElementById('raw-result').innerText;
        document.getElementById('markdown-container').innerHTML = marked.parse(rawResult);

        // 2. Copy Functionality
        function copyToClipboard() {
            navigator.clipboard.writeText(rawResult);
            alert("Result copied to clipboard!");
        }

        // 3. Animations
        const { motion } = window.Motion;

        motion(document.getElementById('container'), {
            initial: { opacity: 0, scale: 0.9 },
            animate: { opacity: 1, scale: 1 },
            transition: { duration: 0.5 }
        });

        motion(document.getElementById('query-box'), {
            initial: { opacity: 0, y: 20 },
            animate: { opacity: 1, y: 0 },
            transition: { delay: 0.2 }
        });

        motion(document.getElementById('result-box'), {
            initial: { opacity: 0, y: 20 },
            animate: { opacity: 1, y: 0 },
            transition: { delay: 0.4 }
        });
    </script>
</body>
</html>